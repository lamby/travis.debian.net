<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">

  <link rel="stylesheet" type="text/css" href="media/style.css" media="screen">

  <title>
    travis.debian.net &mdash; Easily test your Debian packages on travis-ci.org
  </title>
</head>

<body>

<a id="github" href="https://github.com/lamby/travis.debian.net"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/567c3a48d796e2fc06ea80409cc9dd82bf714434/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png"></a>

<header>
  <div class="container">
    <h1>travis.debian.net</h1>
    <h2>Easily test your Debian packages on travis-ci.org</h2>
  </div>
</header>

<div class="container">
  <section id="main_content">
    <h3 id="what">
      What is this?
    </h3>

    <p>
      <tt>travis.debian.net</tt> is a hosted utility to make it easier and
      cleaner to build and test your Debian packages on the
      <a href="https://travis-ci.org">Travis CI</a> hosted continuous
      integration platform without duplicating scripts or configuration across
      multiple repositories.
    </p>

    <h3 id="quick-setup">
      Quick setup
    </h3>

    <ul>
      <li>
        Enable builds for your package on
        <a href="https://travis-ci.org">travis-ci.org</a>.
      </li>
      <li>
        Ensure "<em>Only build where .travis.yml is present</em>" is enabled.
      </li>
      <li>
        Add <tt>.travis.yml</tt> to your
        <a href="https://honk.sigxcpu.org/piki/projects/git-buildpackage/">git-buildpackage</a>
        branches:

        <pre>$ wget -O.travis.yml <a href="http://travis.debian.net/travis.yml">http://travis.debian.net/travis.yml</a></pre>
      </li>
      <li>
        If you are using <a href="https://github.com/">GitHub</a>, your
        package will be built automatically after pushing.
      </li>
    </ul>

    <h3 id="how">
      How it works
    </h3>

    <p>
      At it's core <tt>travis.debian.net</tt> is a hosted shell script that is
      executed within the Travis CI test environment.
    </p>

    <p>
      First, <tt>travis.debian.net</tt> detects which release of Debian
      the branch is targeting based on the current branch name. The
      <em>experimental</em> suite and all varieties of backports are
      intelligently detected.
    </p>

    </p>
      A throwaway <a href="https://www.docker.com/">Docker</a> image is then
      created containing all the required build-dependencies. The package is
      then built in this isolated environment with no access to the internet.
    </p>

    <p>
      <a href="https://lintian.debian.org/">Lintian</a> is run on the result
      and the binary packages are saved to <tt>debian/buildd</tt>.
    </p>

    <h3 id="configuration">
      Configuration
    </h3>

    <p>
      Configuration is performed by setting environment variables. You can do
      this within the Travis CI web interface itself.
    </p>

    <p>
      Variables that affect the Debian build process are handled as usual (eg.
      <a href="https://www.debian.org/doc/debian-policy/ch-source.html#s-debianrules-options">DEB_BUILD_OPTIONS</a>).
    </p>

    <dl>
      <dt>
        DEB_BUILD_OPTIONS
      </dt>
      <dd>
      </dd>
      <dt>
        TRAVIS_DEBIAN_DISTRIBUTION
      </dt>
      <dd>
        Which distribution of Debian the package should be built in. By
        default, this is automatically detected from the branch name.
      </dd>
      <dt>
        TRAVIS_DEBIAN_BACKPORTS
      </dt>
      <dd>
        When <tt>true</tt>, the corresponding backports repository will be enabled in
        /etc/apt/sources.list. If <tt>TRAVIS_DEBIAN_DISTRIBUTION</tt> is not
        set, the value is automatically detected.
      </dd>
      <dt>
        TRAVIS_DEBIAN_EXPERIMENTAL
      </dt>
      <dd>
        When <tt>true</tt>, Debian's <em>experimental</em> repository will be
        enabled. If <tt>TRAVIS_DEBIAN_DISTRIBUTION</tt> is not set, the value
        is automatically detected.
      </dd>
      <dt>
        TRAVIS_DEBIAN_MIRROR
      </dt>
      <dd>
        Which Debian mirror to use. By default, the
        <a href="http://httpredir.debian.org/">httpredir.debian.org</a>
        redirection service is used.
      </dd>
      <dt>
        TRAVIS_DEBIAN_TARGET_DIR
      </dt>
      <dd>
        Which directory to store the results of the build. By default, the
        packages are stored in the current directory.
      </dd>
      <dt>
        TRAVIS_DEBIAN_BUILD_DIR
      </dt>
      <dd>
        Which directory to build under. By default, <tt>/tmp/buildd</tt> is used.
      </dd>
      <dt>
        TRAVIS_DEBIAN_NETWORK_ENABLED
      </dt>
      <dd>
        By default, the network is disabled during the package build process.
        If your build really needs internet access, set this value to
        <tt>true</tt>.
      </dd>
    </dl>

    <h3 id="faq">
      Frequently asked questions (FAQ)
    </h3>

    <dl>
      <dt>
        Q: But <tt>wget | sh -</tt> is insecure!
      </dt>
      <dd>
        A: Normally, absolutely. However, Travis-CI builds within isolated
        containers and there is no expectation that the resulting
        <tt>.deb</tt> files are to be used or installed anywhere.
      </dd>
    </dl>

    <h3 id="links">
      Links
    </h3>

    <ul>
      <li>
        <a href="https://github.com/lamby/travis.debian.net">Source</a>
        &bull;
        <a href="https://github.com/lamby/travis.debian.net/issues">Issues</a>
        &bull;
        <a href="https://github.com/lamby/travis.debian.net/pulls">Pull requests</a>
      </li>
      <li>
        <a href="https://travis-ci.org">Travis CI</a>
      </li>
      <li>
        <a href="https://honk.sigxcpu.org/piki/projects/git-buildpackage/">git-buildpackage</a>
      </li>
    </ul>

    <h3>
      Copyright
    </h3>

    <p>
      Copyright &copy; 2015
      <a href="https://chris-lamb.co.uk/">Chris Lamb</a>
      &lt;<a href="mailto:lamby@debian.org" class="user-mention">lamby@debian.org</a>&gt;.
    </p>

    <p>
      This program is free software: you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation, either version 3 of the License, or
      (at your option) any later version.
    </p>
 </section>
</div>

</body>
</html>
